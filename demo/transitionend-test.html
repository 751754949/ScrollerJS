<html>
<head>
<title>Demo transitionend event</title>
<style type="text/css">
#demo-pane{
	position:absolute;
	width:100px;
	height:100px;
	background-color:red;
	transition-duration:0.5s;
}
</style>
</head>
<body>
<span id="demo-pane">
</span>
<script type="text/javascript">
function registerTransitionEndEvent(obj, callback){
	var transitions = {
        'WebkitTransition' : 'webkitTransitionEnd',
        'MozTransition'    : 'transitionend',
        'MSTransition'     : 'msTransitionEnd',
        'OTransition'      : 'oTransitionEnd',
        'transition'       : 'transitionend'
    };
    for(var t in transitions){
        if(obj.style[t] !== undefined){
            obj.addEventListener(transitions[t], function(event){
            	callback();
			}, false);
			break;
        }
    }
}
window.onload = function(){
	var span = document.getElementById("demo-pane");
	registerTransitionEndEvent(span, function(event){
		console.log("Transition end event captured");
	});

	span.style.top = "100px";
	span.style.transform = "translateY(-100px)";
	setTimeout(function(){retransition();}, 1000);
};
function retransition(){
	var rand = 1.0 + (Math.random()/10000);
	var span = document.getElementById("demo-pane");
	span.style.transform = "translateY(0px) scaleX("+rand+")";
	setTimeout(function(){retransition();}, 1000);
}
</script>
</body>
</html>