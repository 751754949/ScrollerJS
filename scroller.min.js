!function(t){function i(t){this.fragment=null,this.div=null,this.direction=t.direction||null,this.interval=t.interval||0,this.amount=t.amount||0,this.width=t.width||0,this.height=t.amount||0,this.textAlign=t.textAlign||"center",this.forceFallback=t.forceFallback||!1,this._mode=t._mode||s.MODE.COUNTUP,this.scrolledAmount=0,this.stepSize=Math.ceil(1*(this.amount+1)/10)||2,this.stepInterval=0,this.step=1,this.startNum=1,this.endNum=1,this.nextNum=1,this.firstChild=null,this.lastChild=null,this.count=0}i.prototype=function(){function t(t){var i=!1,s="Webkit Moz ms O Khtml".split(" "),e=document.createElement("div"),n=null;if(t=t.toLowerCase(),void 0!==e.style[t]&&(i=!0),i===!1){n=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<s.length;r++)if(void 0!==e.style[s[r]+n]){i=!0;break}}return i}function i(t,i,s){t.style.setProperty("-webkit-"+i,s),t.style.setProperty("-moz-"+i,s),t.style.setProperty("-ms-"+i,s),t.style.setProperty("-o-"+i,s),t.style.setProperty(i,s)}function e(t,i){var s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"};for(var e in s)if(void 0!==t.style[e]){t.addEventListener(s[e],function(){var s=t.style.transitionDuration||t.style.webkitTransitionDuration;"1ms"!=s?i.stop():setTimeout(function(){i.iterate()},1)},!1);break}}var n=t("transform");return{init:function(){switch(this.fragment=document.createDocumentFragment(),this.div=document.createElement("div"),this.div.className="scroller",this.div.setAttribute("style","position:relative;overflow:hidden;width:"+this.width+"px;text-align:"+this.textAlign+";height:"+this.height+"px;line-height:"+this.height+"px;"),this.firstChild=document.createElement("span"),this.firstChild.className="scroller-span",this.firstChild.setAttribute("style","position:absolute;height:"+this.height+"px;line-height:"+this.height+"px;left:0px;width:"+this.width+"px;"),this.div.appendChild(this.firstChild),this.lastChild=document.createElement("span"),this.lastChild.className="scroller-span",this.lastChild.setAttribute("style","position:absolute;height:"+this.height+"px;line-height:"+this.height+"px;left:0px;width:"+this.width+"px;"),this.direction){case s.DIRECTION.UP:this.div.appendChild(this.lastChild);break;case s.DIRECTION.DOWN:this.div.insertBefore(this.lastChild,this.firstChild)}return this.fragment.appendChild(this.div),this},start:function(t,i){if(t=parseInt(t),i=parseInt(i),this.startNum=t,this.endNum=i,this.nextNum=this.startNum,this.step=this._mode==s.MODE.COUNTDOWN?t!=i?this.endNum>this.startNum?this.startNum+10-this.endNum:this.startNum-this.endNum:1:t!=i?this.endNum<this.startNum?this.endNum+10-this.startNum:this.endNum-this.startNum:1,this.firstChild.innerHTML=this.startNum,this.lastChild.innerHTML=this.nextNum,n&&!this.forceFallback){switch(this.stepInterval=Math.floor(1*this.interval/this.step),this.firstChild.style.top="0px",this.direction){case s.DIRECTION.UP:this.lastChild.style.top=this.height+"px",this.amount=-this.amount;break;case s.DIRECTION.DOWN:this.lastChild.style.top=-this.height+"px"}e(this.firstChild,this)}else this.stepInterval=Math.ceil(this.interval*this.stepSize/(this.amount*this.step));this.iterate()},iterate:function(){if(this.nextNum!=this.endNum||this.lastChild.innerHTML!=this.endNum)if(this.nextNum==this.endNum&&(this.nextNum=parseInt(this.lastChild.innerHTML)),this.nextNum=this._mode==s.MODE.COUNTDOWN?0==this.nextNum?9:this.nextNum-1:9==this.nextNum?0:this.nextNum+1,this.firstChild.innerHTML=this.lastChild.innerHTML,this.lastChild.innerHTML=this.nextNum,n&&!this.forceFallback){var t=this.stepInterval+"ms";i(this.firstChild,"transition-duration",t),i(this.lastChild,"transition-duration",t);var e=this;setTimeout(function(){e.scroll(e.firstChild,e.lastChild)},0)}else this.resetPosition(),this.scroll(this.firstChild,this.lastChild)},scroll:function(t,s){if(n&&!this.forceFallback){var e=1+Math.random()/1e5,r="translateY("+this.amount+"px) scaleX("+e+")";i(t,"transform",r),i(s,"transform",r)}else this.traditionalScroll(t,s)},traditionalScroll:function(t,i){var e=t.style,n=i.style,r=parseInt(n.top);switch(this.direction){case s.DIRECTION.UP:r>0&&(e.top=r-this.height-this.stepSize+"px",n.top=r-this.stepSize+"px");break;case s.DIRECTION.DOWN:0>r&&(e.top=r+this.height+this.stepSize+"px",n.top=r+this.stepSize+"px")}if(this.scrolledAmount+=this.stepSize,this.scrolledAmount<this.amount){this.stepSize=Math.min(this.stepSize,this.amount-this.scrolledAmount);var h=this;setTimeout(function(){h.scroll(t,i)},this.stepInterval)}else this.stop(),this.iterate()},stop:function(){if(n&&!this.forceFallback){var t=1+Math.random()/1e5,s="translateY(0px) scaleX("+t+")",e="1ms";this.firstChild.innerHTML=this.lastChild.innerHTML,this.nextNum=parseInt(this.lastChild.innerHTML),i(this.firstChild,"transition-duration",e),i(this.lastChild,"transition-duration",e),i(this.firstChild,"transform",s),i(this.lastChild,"transform",s)}else this.scrolledAmount=0},revalidate:function(){this.nextNum=parseInt(this.nextNum),this.endNum=parseInt(this.endNum),this.nextNum!=this.endNum&&(this.step=this._mode==s.MODE.COUNTDOWN?this.nextNum!=this.endNum?this.endNum>this.nextNum?this.nextNum+10-this.endNum:this.nextNum-this.endNum:1:this.nextNum!=this.endNum?this.endNum<this.nextNum?this.endNum+10-this.nextNum:this.endNum-this.nextNum:1,this.stepInterval=n&&!this.forceFallback?Math.floor(1*this.interval/this.step):Math.ceil(this.interval*this.stepSize/(this.amount*this.step)))},resetPosition:function(){switch(this.firstChild.style.top="0px",this.direction){case s.DIRECTION.UP:this.lastChild.style.top=this.height+"px";break;case s.DIRECTION.DOWN:this.lastChild.style.top=-this.height+"px"}},getPanel:function(){return this.fragment},setEndNum:function(t){this.endNum=t}}}();var s=function(){function t(t){this.scrollPanelArray=[],this.props=t,this.scrollPane=document.createElement("div"),this.table=null,this.beginNum=0,this.endNum=0,this.css=null,this.width=this.props.width,this.init(0,0)}var e=0;return t.prototype={init:function(t,e){this.clear(),this.oldCountArray=[],this.newCountArray=[],this.scrollPanelArray=[],this.beginNum=t,this.endNum=e,t+="",e+="";for(var n=t.length,r=e.length,h=0;n>h;++h)this.oldCountArray.push(t.charAt(h));for(var h=0;r>h;++h)this.newCountArray.push(e.charAt(h));var a=Math.abs(n-r),l=Math.max(n,r);if(n>r)for(var h=1;a>=h;++h)this.newCountArray.unshift("0");else if(r>n)for(var h=1;a>=h;++h)this.oldCountArray.unshift("0");var o=document.createDocumentFragment();this.table=document.createElement("table"),this.table.className="scroller-table",this.table.setAttribute("style","margin:auto;"),null!=this.css&&this.setStyle(this.css);var u=document.createElement("tr"),d=Math.floor(this.width/l),p=0;this.props._mode=this.beginNum>this.endNum?s.MODE.COUNTDOWN:s.MODE.COUNTUP,this.props.width=d,this.props.seperatorType!==s.SEPERATOR.NONE&&(p=this.props.seperatorType+1-l%this.props.seperatorType);for(var h=0;l>h;++h){var c=document.createElement("td"),m=new i(this.props).init();if(this.scrollPanelArray.push(m),c.appendChild(m.getPanel()),u.appendChild(c),this.props.seperatorType!=s.SEPERATOR.NONE&&(h+p)%this.props.seperatorType===0&&l>h+1){var c=document.createElement("td"),f=document.createElement("div"),N=document.createElement("span");N.className="scroller-span",N.innerHTML=this.props.seperator,f.setAttribute("style","height:"+(this.props.amount+10)+"px;line-height:"+this.props.amount+"px;left:0px;top:0px;vertical-align:middle;"),f.appendChild(N),c.appendChild(f),u.appendChild(c)}}this.table.appendChild(u),o.appendChild(this.table),this.scrollPane.appendChild(o);for(var h=0,C=this.oldCountArray.length;C>h;++h)this.scrollPanelArray[h].start(this.oldCountArray[h],this.newCountArray[h])},appendTo:function(t){return t.appendChild(this.scrollPane),this},getScrollPanels:function(){return this.scrollPanelArray},setStyle:function(t){if(this.css=t,"string"==typeof t){var i=t.split(";");for(var s in i){var e=i[s].split(":"),n=e[0],r=2==e.length?e[1]:"";this.isUnmodifiableStyle(n)||(this.table.style[n]=r)}}else if("object"==typeof t)for(var h in t)this.table.style[h]=t[h]},isUnmodifiableStyle:function(t){var i=["position","overflow"];for(var s in i)if(t.toLowerCase()===i[s])return!0;return!1},start:function(t){var i=0;i="number"==typeof t?parseInt(t)+"":t.trim().replace(/,/g,""),this.init(t,t)},scrollTo:function(t){var i=0;if(i="number"==typeof t?parseInt(t)+"":t.trim().replace(/,/g,""),i.length!=this.newCountArray.length)this.init(this.endNum,parseInt(i));else{this.beginNum=this.endNum,this.oldCountArray=this.newCountArray,this.endNum=parseInt(i),this.newCountArray=[];for(var s=0,e=i.length;e>s;++s)this.newCountArray.push(i.charAt(s))}this.refresh()},scrollFromTo:function(t,i){var s=0;s="number"==typeof t?parseInt(t):t.trim().replace(/,/g,""),this.endNum=parseInt(s),this.newCountArray=[];for(var e=0,n=s.length;n>e;++e)this.newCountArray.push(s.charAt(e));this.scrollTo(i)},refresh:function(){var t=this;setTimeout(function(){for(var i=0,s=t.oldCountArray.length;s>i;++i)t.scrollPanelArray[i].setEndNum(t.newCountArray[i]),t.scrollPanelArray[i].revalidate(),t.scrollPanelArray[i].iterate()},1)},clear:function(){for(;this.scrollPane.firstChild;)this.scrollPane.removeChild(this.scrollPane.firstChild)}},{DIRECTION:{UP:1,DOWN:2,LEFT:3,RIGHT:4},SEPERATOR:{NONE:0,THOUSAND:3,TIME:2},MODE:{COUNTUP:0,COUNTDOWN:1},getNewInstance:function(i){return e++,i=i||{},i.direction=i.direction||s.DIRECTION.UP,i.interval=i.interval||5e3,i.width=i.width||400,i.amount=i.amount||250,i.seperatorType=i.seperatorType||s.SEPERATOR.NONE,i.seperator=i.seperator||"",i.textAlign=i.textAlign||"center",i.forceFallback=i.forceFallback||!1,new t(i)},getScrollerSize:function(){return e}}}();t.Scroller=s}(window);
