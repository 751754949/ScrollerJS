!function(t){function e(t){this.fragment=null,this.div=null,this.innerDdiv=null,this.direction=t.direction||null,this.interval=t.interval||0,this.amount=t.amount||0,this.width=t.width||0,this.height=t.amount||0,this.textAlign=t.textAlign||"center",this.upperBound=t.upperBound||9,this.forceFallback=t.forceFallback||!1,this.mode=t._mode||h.MODE.COUNTUP,this.stepSize=Math.ceil(1*(this.amount+1)/10)||2,this.stepInterval=0,this.step=1,this.startNum=1,this.endNum=1,this.nextNum=1,this.firstChild=null,this.lastChild=null,this.count=0}function i(t){e.call(this,t)}function n(t){e.call(this,t),this.scrolledAmount=0}var s={extend:function(t,e){return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e},clone:function(t){if(null==t||"object"!=typeof t)return t;var e=t.constructor();for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}};e.prototype=function(){return{init:function(){switch(this.fragment=document.createDocumentFragment(),this.div=document.createElement("div"),this.div.className="scroller",this.div.setAttribute("style","position:relative;overflow:hidden;width:"+this.width+"px;text-align:"+this.textAlign+";height:"+this.height+"px;line-height:"+this.height+"px;"),this.innerDiv=document.createElement("div"),this.innerDiv.setAttribute("style","position:absolute;width:"+this.width+"px;text-align:"+this.textAlign+";"),this.firstChild=document.createElement("span"),this.firstChild.className="scroller-span",this.firstChild.setAttribute("style","position:absolute;height:"+this.height+"px;line-height:"+this.height+"px;left:0px;top:0px;width:"+this.width+"px;"),this.innerDiv.appendChild(this.firstChild),this.lastChild=document.createElement("span"),this.lastChild.className="scroller-span",this.lastChild.setAttribute("style","position:absolute;height:"+this.height+"px;line-height:"+this.height+"px;left:0px;width:"+this.width+"px;"),this.direction){case h.DIRECTION.UP:this.innerDiv.appendChild(this.lastChild),this.lastChild.style.top=this.height+"px";break;case h.DIRECTION.DOWN:this.innerDiv.insertBefore(this.lastChild,this.firstChild),this.lastChild.style.top=-this.height+"px"}return this.div.appendChild(this.innerDiv),this.fragment.appendChild(this.div),this},start:function(t,e){t=parseInt(t),e=parseInt(e),this.startNum=t,this.endNum=e,this.nextNum=this.startNum,this.step=this.mode==h.MODE.COUNTDOWN?t!=e?this.endNum>this.startNum?this.startNum+(this.upperBound+1)-this.endNum:this.startNum-this.endNum:Number.MAX_VALUE:t!=e?this.endNum<this.startNum?this.endNum+(this.upperBound+1)-this.startNum:this.endNum-this.startNum:Number.MAX_VALUE,this.firstChild.innerHTML=this.startNum,this.lastChild.innerHTML=this.nextNum,this.innerStart(),this.iterate()},innerStart:function(){},iterate:function(){(this.nextNum!=this.endNum||this.lastChild.innerHTML!=this.endNum)&&(this.nextNum==this.endNum&&(this.nextNum=parseInt(this.lastChild.innerHTML)),this.nextNum=this.mode==h.MODE.COUNTDOWN?0==this.nextNum?this.upperBound:this.nextNum-1:this.nextNum==this.upperBound?0:this.nextNum+1,this.innerIterate())},innerIterate:function(){},scroll:function(){},stop:function(){},revalidate:function(){this.nextNum=parseInt(this.nextNum),this.endNum=parseInt(this.endNum),this.nextNum!=this.endNum&&(this.step=this.mode==h.MODE.COUNTDOWN?this.nextNum!=this.endNum?this.endNum>this.nextNum?this.nextNum+(this.upperBound+1)-this.endNum:this.nextNum-this.endNum:Number.MAX_VALUE:this.nextNum!=this.endNum?this.endNum<this.nextNum?this.endNum+(this.upperBound+1)-this.nextNum:this.endNum-this.nextNum:Number.MAX_VALUE,this.innerRevalidate())},innerRevalidate:function(){},resetPosition:function(){this.innerDiv.style.top="0px",this.innerDiv.offsetHeight},getPanel:function(){return this.fragment},setEndNum:function(t){this.endNum=t},setMode:function(t){this.mode=t}}}(),s.extend(e,i),i.prototype._props={},i.prototype._set=function(t,e,n){if(this._props[e])t.style.setProperty(this._props[e],n);else{var s="-webkit- -moz- -ms- -o-".split(" ");i.prototype._props[e]=e;for(var r=0,h=s.length;h>r;++r)if(void 0!==t.style[s[r]+e]){i.prototype._props[e]=s[r]+e;break}this._set(t,e,n)}},i.prototype._addEventListener=function(t,e){var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"};for(var n in i)if(void 0!==t.style[n]){t.addEventListener(i[n],function(){var i=t.style.transitionDuration||t.style.webkitTransitionDuration;"0ms"!=i&&e.stop()},!1);break}},i.prototype.innerStart=function(){this.stepInterval=Math.max(1,Math.floor(1*this.interval/this.step)),this.direction==h.DIRECTION.UP&&(this.amount=-this.amount),this._addEventListener(this.innerDiv,this)},i.prototype.innerIterate=function(){this.firstChild.innerHTML=this.lastChild.innerHTML,this.lastChild.innerHTML=this.nextNum;var t=this.stepInterval+"ms";this._set(this.innerDiv,"transition-duration",t);var e=this;setTimeout(function(){e.scroll()},0)},i.prototype.scroll=function(){var t=1+Math.random()/1e5,e="translateY("+this.amount+"px) scaleX("+t+")";this._set(this.innerDiv,"transform",e)},i.prototype.stop=function(){var t=1+Math.random()/1e5,e="translateY(0px) scaleX("+t+")",i="0ms";this.firstChild.innerHTML=this.lastChild.innerHTML,this.nextNum=parseInt(this.lastChild.innerHTML),this._set(this.innerDiv,"transition-duration",i),this._set(this.innerDiv,"transform",e);var n=this;setTimeout(function(){n.iterate()},0)},i.prototype.innerRevalidate=function(){this.stepInterval=Math.max(1,Math.floor(1*this.interval/this.step))},s.extend(e,n),n.prototype.innerStart=function(){this.stepInterval=Math.ceil(this.interval*this.stepSize/(this.amount*this.step))},n.prototype.innerIterate=function(){this.firstChild.innerHTML=this.lastChild.innerHTML,this.lastChild.innerHTML=this.nextNum,this.scroll()},n.prototype.scroll=function(){var t=this.innerDiv.style,e=parseInt(t.top);switch(this.direction){case h.DIRECTION.UP:t.top=e-this.stepSize+"px";break;case h.DIRECTION.DOWN:t.top=e+this.stepSize+"px"}if(this.scrolledAmount+=this.stepSize,this.scrolledAmount<this.amount){this.stepSize=Math.min(this.stepSize,this.amount-this.scrolledAmount);var i=this;setTimeout(function(){i.scroll()},this.stepInterval)}else this.stop(),this.iterate()},n.prototype.stop=function(){this.scrolledAmount=0,this.firstChild.innerHTML=this.lastChild.innerHTML,this.resetPosition()},n.prototype.innerRevalidate=function(){this.stepInterval=Math.ceil(this.interval*this.stepSize/(this.amount*this.step))};var r=function(){function t(t){var e=!1,i="Webkit Moz ms O Khtml".split(" "),n=document.createElement("div"),s=null;if(t=t.toLowerCase(),void 0!==n.style[t]&&(e=!0),e===!1){s=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<i.length;r++)if(void 0!==n.style[i[r]+s]){e=!0;break}}return e}var e=t("transform");return{createScrollPanel:function(t){return e&&!t.forceFallback?new i(t):new n(t)}}}(),h=function(){function t(t){this.scrollPanelArray=[],this.props=t,this.scrollPane=document.createElement("div"),this.table=null,this.beginNum=0,this.endNum=0,this.css=null,this.width=this.props.width,this.init(0,0)}function e(e){t.call(this,e)}var i=0;t.prototype={init:function(t,e){this.clear(),this.oldCountArray=[],this.newCountArray=[],this.scrollPanelArray=[],this.beginNum=t,this.endNum=e,t+="",e+="";for(var i=t.length,n=e.length,s=0;i>s;++s)this.oldCountArray.push(t.charAt(s));for(var s=0;n>s;++s)this.newCountArray.push(e.charAt(s));var r=Math.abs(i-n),o=Math.max(i,n);if(i>n)for(var s=1;r>=s;++s)this.newCountArray.unshift("0");else if(n>i)for(var s=1;r>=s;++s)this.oldCountArray.unshift("0");var a=document.createDocumentFragment();this.table=document.createElement("table"),this.table.className="scroller-table",this.table.setAttribute("style","margin:auto;"),null!=this.css&&this.setStyle(this.css);var l=Math.floor(this.width/o);this.props._mode=this.beginNum>this.endNum?h.MODE.COUNTDOWN:h.MODE.COUNTUP,this.props.width=l,this.innerInit(o),a.appendChild(this.table),this.scrollPane.appendChild(a);for(var s=0,p=this.oldCountArray.length;p>s;++s)this.scrollPanelArray[s].start(this.oldCountArray[s],this.oldCountArray[s])},innerInit:function(t){var e=0;this.props.seperatorType!==h.SEPERATOR.NONE&&(e=this.props.seperatorType+1-t%this.props.seperatorType);for(var i=document.createElement("tr"),n=0;t>n;++n){var s=document.createElement("td"),o=r.createScrollPanel(this.props).init();if(this.scrollPanelArray.push(o),s.appendChild(o.getPanel()),i.appendChild(s),this.props.seperatorType!=h.SEPERATOR.NONE&&(n+e)%this.props.seperatorType===0&&t>n+1){var s=document.createElement("td"),a=document.createElement("div"),l=document.createElement("span");l.className="scroller-span",l.innerHTML=this.props.seperator,a.setAttribute("style","height:"+(this.props.amount+10)+"px;line-height:"+this.props.amount+"px;left:0px;top:0px;vertical-align:middle;"),a.appendChild(l),s.appendChild(a),i.appendChild(s)}}this.table.appendChild(i)},appendTo:function(t){return t.appendChild(this.scrollPane),this},getScrollPanels:function(){return this.scrollPanelArray},setStyle:function(t){if(this.css=t,"string"==typeof t){var e=t.split(";");for(var i in e){var n=e[i].split(":"),s=n[0],r=2==n.length?n[1]:"";this.isUnmodifiableStyle(s)||(this.table.style[s]=r)}}else if("object"==typeof t)for(var h in t)this.table.style[h]=t[h]},isUnmodifiableStyle:function(t){var e=["position","overflow"];for(var i in e)if(t.toLowerCase()===e[i])return!0;return!1},start:function(t){var e=0;e="number"==typeof t?parseInt(t)+"":t.trim().replace(/,/g,""),this.init(t,t)},scrollTo:function(t){var e=(t+"").trim().replace(/,:/g,"");if(e.length!=this.newCountArray.length)this.init(this.endNum,e);else{this.beginNum=this.endNum,this.oldCountArray=this.newCountArray,this.endNum=e,this.newCountArray=[],this.props._mode=this.beginNum>this.endNum?h.MODE.COUNTDOWN:h.MODE.COUNTUP;for(var i=0,n=e.length;n>i;++i)this.newCountArray.push(e.charAt(i))}this.refresh()},scrollFromTo:function(t,e){var t=(t+"").trim().replace(/,:/g,""),e=(e+"").trim().replace(/,:/g,"");this.start(t),this.scrollTo(e)},refresh:function(){var t=this;setTimeout(function(){for(var e=0,i=t.oldCountArray.length;i>e;++e)t.props._mode&&t.scrollPanelArray[e].setMode(t.props._mode),t.scrollPanelArray[e].setEndNum(t.newCountArray[e]),t.scrollPanelArray[e].revalidate(),t.scrollPanelArray[e].iterate()},1)},clear:function(){for(;this.scrollPane.firstChild;)this.scrollPane.removeChild(this.scrollPane.firstChild)}},s.extend(t,e),e.prototype.innerInit=function(t){for(var e=this.props.seperatorType+1-t%this.props.seperatorType,i=document.createElement("tr"),n=0;t>n;++n){var h=document.createElement("td"),o=s.clone(this.props);n%2==0&&(o.upperBound=0==n?2:5);var a=r.createScrollPanel(o).init();if(this.scrollPanelArray.push(a),h.appendChild(a.getPanel()),i.appendChild(h),(n+e)%o.seperatorType===0&&t>n+1){var h=document.createElement("td"),l=document.createElement("div"),p=document.createElement("span");p.className="scroller-span",p.innerHTML=o.seperator,l.setAttribute("style","height:"+(o.amount+10)+"px;line-height:"+o.amount+"px;left:0px;top:0px;vertical-align:middle;"),l.appendChild(p),h.appendChild(l),i.appendChild(h)}}this.table.appendChild(i)};var n=function(){return{createScrollerImpl:function(i){var n=null;switch(i.seperatorType){case h.SEPERATOR.TIME:n=new e(i);break;case h.SEPERATOR.THOUSAND:default:n=new t(i)}return n}}}();return{DIRECTION:{UP:1,DOWN:2},SEPERATOR:{NONE:0,TIME:2,THOUSAND:3},MODE:{COUNTUP:0,COUNTDOWN:1},getNewInstance:function(t){return i++,t=t||{},t.direction=t.direction||h.DIRECTION.UP,t.interval=t.interval||5e3,t.width=t.width||400,t.amount=t.amount||250,t.seperatorType=t.seperatorType||h.SEPERATOR.NONE,t.seperator=t.seperator||"",t.textAlign=t.textAlign||"center",t.forceFallback=t.forceFallback||!1,n.createScrollerImpl(t)},getScrollerSize:function(){return i}}}();t.Scroller=h}(window);