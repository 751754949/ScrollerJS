!function(t){function e(t){this.fragment=null,this.div=null,this.direction=t.direction||null,this.interval=t.interval||0,this.amount=t.amount||0,this.width=t.width||0,this.height=t.amount||0,this.textAlign=t.textAlign||"center",this.upperBound=t.upperBound||9,this.forceFallback=t.forceFallback||!1,this.mode=t._mode||h.MODE.COUNTUP,this.scrolledAmount=0,this.stepSize=Math.ceil(1*(this.amount+1)/10)||2,this.stepInterval=0,this.step=1,this.startNum=1,this.endNum=1,this.nextNum=1,this.firstChild=null,this.lastChild=null,this.count=0}function i(t){e.call(this,t)}function s(t){e.call(this,t)}var n={extend:function(t,e){return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e},clone:function(t){if(null==t||"object"!=typeof t)return t;var e=t.constructor();for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}};e.prototype=function(){return{init:function(){switch(this.fragment=document.createDocumentFragment(),this.div=document.createElement("div"),this.div.className="scroller",this.div.setAttribute("style","position:relative;overflow:hidden;width:"+this.width+"px;text-align:"+this.textAlign+";height:"+this.height+"px;line-height:"+this.height+"px;"),this.firstChild=document.createElement("span"),this.firstChild.className="scroller-span",this.firstChild.setAttribute("style","position:absolute;height:"+this.height+"px;line-height:"+this.height+"px;left:0px;width:"+this.width+"px;"),this.div.appendChild(this.firstChild),this.lastChild=document.createElement("span"),this.lastChild.className="scroller-span",this.lastChild.setAttribute("style","position:absolute;height:"+this.height+"px;line-height:"+this.height+"px;left:0px;width:"+this.width+"px;"),this.direction){case h.DIRECTION.UP:this.div.appendChild(this.lastChild);break;case h.DIRECTION.DOWN:this.div.insertBefore(this.lastChild,this.firstChild)}return this.fragment.appendChild(this.div),this},start:function(t,e){t=parseInt(t),e=parseInt(e),this.startNum=t,this.endNum=e,this.nextNum=this.startNum,this.step=this._mode==h.MODE.COUNTDOWN?t!=e?this.endNum>this.startNum?this.startNum+(this.upperBound+1)-this.endNum:this.startNum-this.endNum:1:t!=e?this.endNum<this.startNum?this.endNum+(this.upperBound+1)-this.startNum:this.endNum-this.startNum:1,this.firstChild.innerHTML=this.startNum,this.lastChild.innerHTML=this.nextNum,this.innerStart(),this.iterate()},innerStart:function(){},iterate:function(){(this.nextNum!=this.endNum||this.lastChild.innerHTML!=this.endNum)&&(this.nextNum==this.endNum&&(this.nextNum=parseInt(this.lastChild.innerHTML)),this.nextNum=this.mode==h.MODE.COUNTDOWN?0==this.nextNum?this.upperBound:this.nextNum-1:this.nextNum==this.upperBound?0:this.nextNum+1,this.firstChild.innerHTML=this.lastChild.innerHTML,this.lastChild.innerHTML=this.nextNum,this.innerIterate())},innerIterate:function(){},scroll:function(){},stop:function(){},revalidate:function(){this.nextNum=parseInt(this.nextNum),this.endNum=parseInt(this.endNum),this.nextNum!=this.endNum&&(this.step=this.mode==h.MODE.COUNTDOWN?this.nextNum!=this.endNum?this.endNum>this.nextNum?this.nextNum+(this.upperBound+1)-this.endNum:this.nextNum-this.endNum:1:this.nextNum!=this.endNum?this.endNum<this.nextNum?this.endNum+(this.upperBound+1)-this.nextNum:this.endNum-this.nextNum:1,this.innerRevalidate())},innerRevalidate:function(){},resetPosition:function(){switch(this.firstChild.style.top="0px",this.direction){case h.DIRECTION.UP:this.lastChild.style.top=this.height+"px";break;case h.DIRECTION.DOWN:this.lastChild.style.top=-this.height+"px"}},getPanel:function(){return this.fragment},setEndNum:function(t){this.endNum=t},setMode:function(t){this.mode=t}}}(),n.extend(e,i),i.prototype._set=function(t,e,i){t.style.setProperty("-webkit-"+e,i),t.style.setProperty("-moz-"+e,i),t.style.setProperty("-ms-"+e,i),t.style.setProperty("-o-"+e,i),t.style.setProperty(e,i)},i.prototype._addEventListener=function(t,e){var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"};for(var s in i)if(void 0!==t.style[s]){t.addEventListener(i[s],function(){var i=t.style.transitionDuration||t.style.webkitTransitionDuration;"1ms"!=i?e.stop():setTimeout(function(){e.iterate()},1)},!1);break}},i.prototype.innerStart=function(){switch(this.stepInterval=Math.floor(1*this.interval/this.step),this.firstChild.style.top="0px",this.direction){case h.DIRECTION.UP:this.lastChild.style.top=this.height+"px",this.amount=-this.amount;break;case h.DIRECTION.DOWN:this.lastChild.style.top=-this.height+"px"}this._addEventListener(this.firstChild,this)},i.prototype.innerIterate=function(){var t=this.stepInterval+"ms";this._set(this.firstChild,"transition-duration",t),this._set(this.lastChild,"transition-duration",t);var e=this;setTimeout(function(){e.scroll(e.firstChild,e.lastChild)},0)},i.prototype.scroll=function(t,e){var i=1+Math.random()/1e5,s="translateY("+this.amount+"px) scaleX("+i+")";this._set(t,"transform",s),this._set(e,"transform",s)},i.prototype.stop=function(){var t=1+Math.random()/1e5,e="translateY(0px) scaleX("+t+")",i="1ms";this.firstChild.innerHTML=this.lastChild.innerHTML,this.nextNum=parseInt(this.lastChild.innerHTML),this._set(this.firstChild,"transition-duration",i),this._set(this.lastChild,"transition-duration",i),this._set(this.firstChild,"transform",e),this._set(this.lastChild,"transform",e)},i.prototype.innerRevalidate=function(){this.stepInterval=Math.floor(1*this.interval/this.step)},n.extend(e,s),s.prototype.innerStart=function(){this.stepInterval=Math.ceil(this.interval*this.stepSize/(this.amount*this.step))},s.prototype.innerIterate=function(){this.resetPosition(),this.scroll(this.firstChild,this.lastChild)},s.prototype.scroll=function(t,e){var i=t.style,s=e.style,n=parseInt(s.top);switch(this.direction){case h.DIRECTION.UP:n>0&&(i.top=n-this.height-this.stepSize+"px",s.top=n-this.stepSize+"px");break;case h.DIRECTION.DOWN:0>n&&(i.top=n+this.height+this.stepSize+"px",s.top=n+this.stepSize+"px")}if(this.scrolledAmount+=this.stepSize,this.scrolledAmount<this.amount){this.stepSize=Math.min(this.stepSize,this.amount-this.scrolledAmount);var r=this;setTimeout(function(){r.scroll(t,e)},this.stepInterval)}else this.stop(),this.iterate()},s.prototype.stop=function(){this.scrolledAmount=0},s.prototype.innerRevalidate=function(){this.stepInterval=Math.ceil(this.interval*this.stepSize/(this.amount*this.step))};var r=function(){function t(t){var e=!1,i="Webkit Moz ms O Khtml".split(" "),s=document.createElement("div"),n=null;if(t=t.toLowerCase(),void 0!==s.style[t]&&(e=!0),e===!1){n=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<i.length;r++)if(void 0!==s.style[i[r]+n]){e=!0;break}}return e}var e=t("transform");return{createScrollPanel:function(t){return e&&!t.forceFallback?new i(t):new s(t)}}}(),h=function(){function t(t){this.scrollPanelArray=[],this.props=t,this.scrollPane=document.createElement("div"),this.table=null,this.beginNum=0,this.endNum=0,this.css=null,this.width=this.props.width,this.init(0,0)}function e(e){t.call(this,e)}var i=0;t.prototype={init:function(t,e){this.clear(),this.oldCountArray=[],this.newCountArray=[],this.scrollPanelArray=[],this.beginNum=t,this.endNum=e,t+="",e+="";for(var i=t.length,s=e.length,n=0;i>n;++n)this.oldCountArray.push(t.charAt(n));for(var n=0;s>n;++n)this.newCountArray.push(e.charAt(n));var r=Math.abs(i-s),o=Math.max(i,s);if(i>s)for(var n=1;r>=n;++n)this.newCountArray.unshift("0");else if(s>i)for(var n=1;r>=n;++n)this.oldCountArray.unshift("0");var a=document.createDocumentFragment();this.table=document.createElement("table"),this.table.className="scroller-table",this.table.setAttribute("style","margin:auto;"),null!=this.css&&this.setStyle(this.css);var l=Math.floor(this.width/o);this.props._mode=this.beginNum>this.endNum?h.MODE.COUNTDOWN:h.MODE.COUNTUP,this.props.width=l,this.innerInit(o),a.appendChild(this.table),this.scrollPane.appendChild(a);for(var n=0,p=this.oldCountArray.length;p>n;++n)this.scrollPanelArray[n].start(this.oldCountArray[n],this.oldCountArray[n])},innerInit:function(t){var e=0;this.props.seperatorType!==h.SEPERATOR.NONE&&(e=this.props.seperatorType+1-t%this.props.seperatorType);for(var i=document.createElement("tr"),s=0;t>s;++s){var n=document.createElement("td"),o=r.createScrollPanel(this.props).init();if(this.scrollPanelArray.push(o),n.appendChild(o.getPanel()),i.appendChild(n),this.props.seperatorType!=h.SEPERATOR.NONE&&(s+e)%this.props.seperatorType===0&&t>s+1){var n=document.createElement("td"),a=document.createElement("div"),l=document.createElement("span");l.className="scroller-span",l.innerHTML=this.props.seperator,a.setAttribute("style","height:"+(this.props.amount+10)+"px;line-height:"+this.props.amount+"px;left:0px;top:0px;vertical-align:middle;"),a.appendChild(l),n.appendChild(a),i.appendChild(n)}}this.table.appendChild(i)},appendTo:function(t){return t.appendChild(this.scrollPane),this},getScrollPanels:function(){return this.scrollPanelArray},setStyle:function(t){if(this.css=t,"string"==typeof t){var e=t.split(";");for(var i in e){var s=e[i].split(":"),n=s[0],r=2==s.length?s[1]:"";this.isUnmodifiableStyle(n)||(this.table.style[n]=r)}}else if("object"==typeof t)for(var h in t)this.table.style[h]=t[h]},isUnmodifiableStyle:function(t){var e=["position","overflow"];for(var i in e)if(t.toLowerCase()===e[i])return!0;return!1},start:function(t){var e=0;e="number"==typeof t?parseInt(t)+"":t.trim().replace(/,/g,""),this.init(t,t)},scrollTo:function(t){var e=(t+"").trim().replace(/,:/g,"");if(e.length!=this.newCountArray.length)this.init(this.endNum,e);else{this.beginNum=this.endNum,this.oldCountArray=this.newCountArray,this.endNum=e,this.newCountArray=[],this.props._mode=this.beginNum>this.endNum?h.MODE.COUNTDOWN:h.MODE.COUNTUP;for(var i=0,s=e.length;s>i;++i)this.newCountArray.push(e.charAt(i))}this.refresh()},scrollFromTo:function(t,e){var t=(t+"").trim().replace(/,:/g,""),e=(e+"").trim().replace(/,:/g,"");this.start(t),this.scrollTo(e)},refresh:function(){var t=this;setTimeout(function(){for(var e=0,i=t.oldCountArray.length;i>e;++e)t.props._mode&&t.scrollPanelArray[e].setMode(t.props._mode),t.scrollPanelArray[e].setEndNum(t.newCountArray[e]),t.scrollPanelArray[e].revalidate(),t.scrollPanelArray[e].iterate()},1)},clear:function(){for(;this.scrollPane.firstChild;)this.scrollPane.removeChild(this.scrollPane.firstChild)}},n.extend(t,e),e.prototype.innerInit=function(t){for(var e=this.props.seperatorType+1-t%this.props.seperatorType,i=document.createElement("tr"),s=0;t>s;++s){var h=document.createElement("td"),o=n.clone(this.props);s%2==0&&(o.upperBound=0==s?2:5);var a=r.createScrollPanel(o).init();if(this.scrollPanelArray.push(a),h.appendChild(a.getPanel()),i.appendChild(h),(s+e)%o.seperatorType===0&&t>s+1){var h=document.createElement("td"),l=document.createElement("div"),p=document.createElement("span");p.className="scroller-span",p.innerHTML=o.seperator,l.setAttribute("style","height:"+(o.amount+10)+"px;line-height:"+o.amount+"px;left:0px;top:0px;vertical-align:middle;"),l.appendChild(p),h.appendChild(l),i.appendChild(h)}}this.table.appendChild(i)};var s=function(){return{createScrollerImpl:function(i){var s=null;switch(i.seperatorType){case h.SEPERATOR.TIME:s=new e(i);break;case h.SEPERATOR.THOUSAND:default:s=new t(i)}return s}}}();return{DIRECTION:{UP:1,DOWN:2},SEPERATOR:{NONE:0,TIME:2,THOUSAND:3},MODE:{COUNTUP:0,COUNTDOWN:1},getNewInstance:function(t){return i++,t=t||{},t.direction=t.direction||h.DIRECTION.UP,t.interval=t.interval||5e3,t.width=t.width||400,t.amount=t.amount||250,t.seperatorType=t.seperatorType||h.SEPERATOR.NONE,t.seperator=t.seperator||"",t.textAlign=t.textAlign||"center",t.forceFallback=t.forceFallback||!1,s.createScrollerImpl(t)},getScrollerSize:function(){return i}}}();t.Scroller=h}(window);