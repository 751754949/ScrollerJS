!function(t){function i(t){this.fragment=null,this.div=null,this.direction=t.direction||null,this.interval=t.interval||0,this.amount=t.amount||0,this.width=t.width||0,this.height=t.amount||0,this.textAlign=t.textAlign||"center",this.scrolledAmount=0,this.stepSize=Math.ceil(1*(this.amount+1)/15)||2,this.stepInterval=0,this.step=1,this.startNum=1,this.endNum=1,this.nextNum=1,this.firstChild=null,this.lastChild=null}i.prototype=function(){return{init:function(){switch(this.fragment=document.createDocumentFragment(),this.div=document.createElement("div"),this.div.className="scroller",this.div.setAttribute("style","position:relative;overflow:hidden;width:"+this.width+"px;text-align:"+this.textAlign+";height:"+this.height+"px;"),this.firstChild=document.createElement("span"),this.firstChild.className="scroller-span",this.firstChild.setAttribute("style","position:absolute;height:"+this.height+"px;line-height:"+this.height+"px;left:0px;width:"+this.width+"px;"),this.div.appendChild(this.firstChild),this.lastChild=document.createElement("span"),this.lastChild.className="scroller-span",this.lastChild.setAttribute("style","position:absolute;height:"+this.height+"px;line-height:"+this.height+"px;left:0px;width:"+this.width+"px;"),this.direction){case e.DIRECTION.UP:this.div.appendChild(this.lastChild);break;case e.DIRECTION.DOWN:this.div.insertBefore(this.lastChild,this.firstChild)}return this.fragment.appendChild(this.div),this},start:function(t,i){this.startNum=t,this.endNum=i,this.nextNum=this.startNum,this.step=t!=i?this.endNum<this.startNum?this.endNum+10-this.startNum:this.endNum-this.startNum:1,this.stepInterval=Math.ceil(this.interval*this.stepSize/(this.amount*this.step)),this.firstChild.innerHTML=this.startNum,this.lastChild.innerHTML=this.nextNum,this.iterate()},iterate:function(){if(this.nextNum!=this.endNum){switch(9==this.nextNum?this.nextNum=0:this.nextNum++,this.firstChild.innerHTML=this.lastChild.innerHTML,this.lastChild.innerHTML=this.nextNum,this.firstChild.style.top="0px",this.direction){case e.DIRECTION.UP:this.lastChild.style.top=this.height+"px";break;case e.DIRECTION.DOWN:this.lastChild.style.top=-this.height+"px"}this.scroll(this.firstChild,this.lastChild)}},scroll:function(t,i){var s=t.style,r=i.style,h=parseInt(r.top);switch(this.direction){case e.DIRECTION.UP:h>0&&(s.top=h-this.height-this.stepSize+"px",r.top=h-this.stepSize+"px");break;case e.DIRECTION.DOWN:0>h&&(s.top=h+this.height+this.stepSize+"px",r.top=h+this.stepSize+"px")}if(this.scrolledAmount+=this.stepSize,this.scrolledAmount<this.amount){var n=this;setTimeout(function(){n.scroll(t,i)},this.stepInterval)}else this.stop(),this.iterate()},stop:function(){this.nextNum==this.endNum&&(this.firstChild.innerHTML=this.lastChild.innerHTML),this.scrolledAmount=0},revalidate:function(){this.step=this.nextNum!=this.endNum?this.endNum<this.nextNum?this.endNum+10-this.nextNum:this.endNum-this.nextNum:1,this.stepInterval=Math.floor(this.interval*this.stepSize/(this.amount*this.step))},getPanel:function(){return this.fragment},setEndNum:function(t){this.endNum=t}}}();var e=function(){function t(t){this.scrollPanelArray=[],this.props=t,this.scrollPane=document.createElement("div"),this.table=null,this.beginNum=0,this.endNum=0,this.css=null,this.init(0,0)}var s=0;return t.prototype={init:function(t,s){this.clear(),this.oldCountArray=[],this.newCountArray=[],this.scrollPanelArray=[],this.beginNum=t,this.endNum=s,t+="",s+="";for(var r=t.length,h=s.length,n=0;r>n;++n)this.oldCountArray.push(t.charAt(n));for(var n=0;h>n;++n)this.newCountArray.push(s.charAt(n));var l=Math.abs(r-h),a=Math.max(r,h);if(r>h)for(var n=1;l>=n;++n)this.newCountArray.unshift("0");else if(h>r)for(var n=1;l>=n;++n)this.oldCountArray.unshift("0");var o=document.createDocumentFragment();this.table=document.createElement("table"),this.table.className="scroller-table",this.table.setAttribute("style","margin:auto;"),null!=this.css&&this.setStyle(this.css);var u=document.createElement("tr"),p=Math.floor(this.props.width/a),d=0;this.props.seperatorType!==e.SEPERATOR.NONE&&(d=this.props.seperatorType+1-a%this.props.seperatorType);for(var n=0;a>n;++n){var c=document.createElement("td");this.props.width=p;var m=new i(this.props).init();if(this.scrollPanelArray.push(m),c.appendChild(m.getPanel()),u.appendChild(c),this.props.seperatorType!=e.SEPERATOR.NONE&&(n+d)%this.props.seperatorType===0&&a>n+1){var c=document.createElement("td"),f=document.createElement("span");f.className="scroller-span",f.innerHTML=this.props.seperator,f.setAttribute("style","height:"+this.height+"px;left:0px;width:"+this.width+"px;top:0px;"),c.appendChild(f),u.appendChild(c)}}this.table.appendChild(u),o.appendChild(this.table),this.scrollPane.appendChild(o);for(var n=0,N=this.oldCountArray.length;N>n;++n)this.scrollPanelArray[n].start(this.oldCountArray[n],this.newCountArray[n])},appendTo:function(t){return t.appendChild(this.scrollPane),this},getScrollPanels:function(){return this.scrollPanelArray},setStyle:function(t){if(this.css=t,"string"==typeof t){var i=t.split(";");for(var e in i){var s=i[e].split(":"),r=s[0],h=2==s.length?s[1]:"";this.isUnmodifiableStyle(r)||(this.table.style[r]=h)}}else if("object"==typeof t)for(var n in t)this.table.style[n]=t[n]},isUnmodifiableStyle:function(t){var i=["position","overflow"];for(var e in i)if(t.toLowerCase()===i[e])return!0;return!1},start:function(t){var i=0;i="number"==typeof t?parseInt(t)+"":t.trim().replace(/,/g,""),this.init(t,t)},scrollTo:function(t){var i=0;if(i="number"==typeof t?parseInt(t)+"":t.trim().replace(/,/g,""),i.length!=this.newCountArray.length)this.init(this.endNum,parseInt(i));else{this.beginNum=this.endNum,this.oldCountArray=this.newCountArray,this.endNum=parseInt(i),this.newCountArray=[];for(var e=0,s=i.length;s>e;++e)this.newCountArray.push(i.charAt(e))}this.refresh()},scrollFromTo:function(t,i){var e=0;e="number"==typeof t?parseInt(t):t.trim().replace(/,/g,""),this.endNum=parseInt(e),this.newCountArray=[];for(var s=0,r=e.length;r>s;++s)this.newCountArray.push(e.charAt(s));this.scrollTo(i)},refresh:function(){oldCountArray=this.oldCountArray,newCountArray=this.newCountArray,scrollPanelArray=this.scrollPanelArray,setTimeout(function(){for(var t=0,i=oldCountArray.length;i>t;++t)scrollPanelArray[t].setEndNum(newCountArray[t]),scrollPanelArray[t].revalidate(),scrollPanelArray[t].iterate()},1)},clear:function(){for(;this.scrollPane.firstChild;)this.scrollPane.removeChild(this.scrollPane.firstChild)}},{DIRECTION:{UP:1,DOWN:2,LEFT:3,RIGHT:4},SEPERATOR:{NONE:0,THOUSAND:3,TIME:2},getNewInstance:function(i){return s++,i=i||{},i.direction=i.direction||e.DIRECTION.UP,i.interval=i.interval||5e3,i.width=i.width||400,i.amount=i.amount||250,i.seperatorType=i.seperatorType||e.SEPERATOR.NONE,i.seperator=i.seperator||"",i.textAlign=i.textAlign||"center",new t(i)},getScrollerSize:function(){return s}}}();t.Scroller=e}(window);
